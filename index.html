<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>E-Service Citizen Portal</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="icon" href="resources/favicon.ico" type="image/x-icon">
  <meta name="description" content="Apsay-Umay City's official e-service portal for citizen requests and services">

</head>
<body>
  <div class="overlay-bg">
    <header class="topbar">
      <div class="logo-container">
        <img src="resources/serveease logo.png" alt="ServeEase Logo" class="logo"/>
        <span class="brand">ServeEase</span>
      </div>
      <nav class="nav-links">
        <a href="services.html">Services</a>
        <a href="faq.html">FAQ</a>
        <a href="contact.html">Contact</a>
      </nav>
      <div class="auth-links">
        <a href="signin.html" class="btn-login">Sign In</a>
        <a href="signup.html" class="btn-signup">Sign Up</a>
      </div>
    </header>

    <main class="main-content">
      <h1 class="portal-title">E-Service Citizen Portal</h1>
      <p class="portal-subtitle">Your one-stop platform for city services and requests.</p>

      <div class="search-container">
          <input type="text" placeholder="Search services (e.g., permits, licenses)" aria-label="Search services">
          <button><i class="fas fa-search"></i> Search</button>
        </div>
      </div>
      <div class="quick-actions">
        <a href="signin.html" class="action-card">
          <img src="resources/permits.png" alt="Submit Request" />
          <span>Submit Request</span>
        </a>
        <a href="signin.html" class="action-card">
          <img src="resources/check status.png" alt="Check Status" />
          <span>Track Request</span>
        </a>
        <a href="signin.html" class="action-card">
          <img src="resources/payment.png" alt="Pay Online" />
          <span>Pay Online</span>
        </a>
        <a href="signin.html" class="action-card">
          <img src="resources/calendar.png" alt="Book Appointment" />
          <span>Book Appointment</span>
        </a>
      </div>


       <section class="services-section">
        <h2>Popular Services</h2>
        <div class="services-grid">
          <div class="service-card">
            <i class="fas fa-file-alt"></i>
            <h3>Business Permits</h3>
            <p>Apply for new or renew business permits online.</p>
            <a href="#" class="btn-service">Apply Now</a>
          </div>
          <div class="service-card">
            <i class="fas fa-home"></i>
            <h3>Health Service</h3>
            <p>Book a free medical appointment now.</p>
            <a href="#" class="btn-service">Book Now</a>
          </div>
          <div class="service-card">
            <i class="fas fa-id-card"></i>
            <h3>ID & Licenses</h3>
            <p>Apply for city IDs, driver’s licenses, and more.</p>
            <a href="#" class="btn-service">Learn More</a>
          </div>
        </div>
      </section>

      <section class="news-section">
        <h2>Latest Updates</h2>
        <div class="news-card">
          <h3>New Online Payment System</h3>
          <p>Pay your fees securely with our upgraded payment gateway.</p>
          <a href="#" class="btn-news">Read More →</a>
        </div>
      </section>

<div id="loginPopup" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2>Login Required</h2>
    <p>Please login to access this service.</p>
    
<div id="loginPopup" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2>Login Required</h2>
    <p id="loginMessage">Please login to access this service.</p>
    
    <form id="modalLoginForm">
      <div class="form-group">
        <label for="modalEmail">Email</label>
        <input type="email" id="modalEmail" required>
      </div>
      <div class="form-group">
        <label for="modalPassword">Password</label>
        <input type="password" id="modalPassword" required>
      </div>
      <button type="submit" class="btn-login">Login</button>
    </form>
    
    <div class="modal-footer">
      <p>Don't have an account? <a href="signup.html" id="signupLink">Sign up</a></p>
    </div>
  </div>
</div>
  // Auth functions
document.addEventListener('DOMContentLoaded', function() {
  // Check if user is logged in
  checkLoginStatus();
  
  // Handle modal login form submission
  const modalLoginForm = document.getElementById('modalLoginForm');
  if (modalLoginForm) {
    modalLoginForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const email = document.getElementById('modalEmail').value;
      const password = document.getElementById('modalPassword').value;
      
      // Try to login
      if (loginUser(email, password)) {
        // Get the redirect URL from sessionStorage
        const redirectUrl = sessionStorage.getItem('redirectAfterLogin') || 'index.html';
        
        // Clear the redirect URL
        sessionStorage.removeItem('redirectAfterLogin');
        
        // Redirect to the original page or home
        window.location.href = redirectUrl;
      } else {
        document.getElementById('loginMessage').textContent = 'Invalid email or password';
      }
    });
  }
  
  // Add click handlers to all protected links
  document.querySelectorAll('[data-protected]').forEach(link => {
    link.addEventListener('click', function(e) {
      if (!isLoggedIn()) {
        e.preventDefault();
        // Store the intended destination
        sessionStorage.setItem('redirectAfterLogin', this.href);
        // Show login modal
        document.getElementById('loginPopup').style.display = 'block';
      }
    });
  });
});

// Check if user is logged in
function isLoggedIn() {
  return localStorage.getItem('currentUser') !== null;
}

// Check login status and update UI
function checkLoginStatus() {
  const authLinks = document.querySelector('.auth-links');
  if (!authLinks) return;
  
  if (isLoggedIn()) {
    const user = JSON.parse(localStorage.getItem('currentUser'));
    authLinks.innerHTML = `
      <span>Welcome, ${user.email}</span>
      <a href="#" class="btn-logout" id="logoutBtn">Logout</a>
    `;
    document.getElementById('logoutBtn').addEventListener('click', logoutUser);
  }
}

// Login function
function loginUser(email, password) {
  // Get stored user data
  const userData = JSON.parse(localStorage.getItem(email));
  
  // Check if user exists and password matches
  if (userData && userData.password === password) {
    // Store current user in localStorage
    localStorage.setItem('currentUser', JSON.stringify({
      email: email,
      // other user data you want to store
    }));
    return true;
  }
  return false;
}

// Logout function
function logoutUser() {
  localStorage.removeItem('currentUser');
  window.location.reload();

  // Signup form handling
const signupForm = document.getElementById('signupForm');
if (signupForm) {
  signupForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    
    // Check if user already exists
    if (localStorage.getItem(email)) {
      alert('User already exists!');
      return;
    }
    
    // Store user data
    localStorage.setItem(email, JSON.stringify({
      password: password,
      createdAt: new Date().toISOString()
    }));
    
    alert('Account created successfully! Please login.');
    window.location.href = 'signin.html';
  });
}

}
    </main>

    <footer class="footer">
  <div class="footer-content">

    <div class="footer-section">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="services.html">All Services</a></li>
        <li><a href="faq.html">FAQ</a></li>
      </ul>
    </div>


    <div class="footer-section">
      <h3>Contact</h3>
      <p><i class="icon-email"></i> email@gmail.com</p>
      <p><i class="icon-phone"></i> +63 012 3456 7890</p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>© 2023 APSAY-UMAY CITY E-SERVICES | <a href="privacy.html">Privacy Policy</a></p>
  </div>
</footer>
  </div>

  <div class="chatbot-icon">
      <i class="fas fa-robot"></i>
    </div>
  </div>
  <script src="script.js"></script>

</body>

</body>
</html>